/*
 * JellyPop -  v1.3
 *
 * Copyright (c) 2014 Vincent Palcon (http://github.com/vincentpalcon)
 * This content is released under the MIT License (http://opensource.org/licenses/MIT).
 * http://jellypop.vincentpalcon.tk
 * 
 */
function Config(){}var Assets=Class.extend({queue:void 0,callback:void 0,scope:void 0,loaderBar:void 0,percentTf:void 0,init:function(a,b){this.callback=a,this.scope=b,this.preloader=new Preloader,this.queue=new createjs.LoadQueue(!1),createjs.Sound.alternateExtensions=["mp3"],this.queue.installPlugin(createjs.Sound);var c=[{id:"background",src:"assets/images/background.png"},{id:"fader",src:"assets/images/fader.png"},{id:"circle",src:"assets/images/circle.png"},{id:"circle2",src:"assets/images/circle2.png"},{id:"circle3",src:"assets/images/circle3.png"},{id:"circle4",src:"assets/images/circle4.png"},{id:"bullet",src:"assets/images/bullet.png"},{id:"playButton",src:"assets/images/playButton.png"},{id:"soundIconOn",src:"assets/images/soundIconOn.png"},{id:"soundIconOff",src:"assets/images/soundIconOff.png"},{id:"cloud1",src:"assets/images/cloud1.png"},{id:"cloud2",src:"assets/images/cloud2.png"},{id:"cloud3",src:"assets/images/cloud3.png"},{id:"cloud4",src:"assets/images/cloud4.png"},{id:"eyesAnim",src:"assets/images/eyesAnim.png"},{id:"eyesStatic",src:"assets/images/eyesStatic.png"},{id:"gameTitle",src:"assets/images/gameTitle.png"},{id:"levelSelectTitle",src:"assets/images/levelSelectTitle.png"},{id:"homeButton",src:"assets/images/homeButton.png"},{id:"upButton",src:"assets/images/upButton.png"},{id:"downButton",src:"assets/images/downButton.png"},{id:"levelItemBack",src:"assets/images/levelItemBack.png"},{id:"levelItemCompleteBack",src:"assets/images/levelItemCompleteBack.png"},{id:"levelItemLockedBack",src:"assets/images/levelItemLockedBack.png"},{id:"restartButton",src:"assets/images/restartButton.png"},{id:"menuButton",src:"assets/images/menuButton.png"},{id:"pauseButton",src:"assets/images/pauseButton.png"},{id:"levelUIBack",src:"assets/images/levelUIBack.png"},{id:"levelCompleteInner",src:"assets/images/levelCompleteInner.png"},{id:"nextButton",src:"assets/images/nextButton.png"},{id:"levelFailInner",src:"assets/images/levelFailInner.png"},{id:"blackBack",src:"assets/images/blackBack.png"},{id:"pauseInner",src:"assets/images/pauseInner.png"},{id:"exit2Button",src:"assets/images/exit2Button.png"},{id:"exit2ButtonBig",src:"assets/images/exit2ButtonBig.png"},{id:"resumeButton",src:"assets/images/resumeButton.png"},{id:"deleteProgressInner",src:"assets/images/deleteProgressInner.png"},{id:"yesButton",src:"assets/images/yesButton.png"},{id:"noButton",src:"assets/images/noButton.png"},{id:"gameCompleteInner",src:"assets/images/gameCompleteInner.png"},{id:"creditsInner",src:"assets/images/creditsInner.png"},{id:"creditsButton",src:"assets/images/creditsButton.png"},{id:"closeButton",src:"assets/images/closeButton.png"},{id:"vpLogo",src:"assets/images/vpLogo.png"},{id:"karataev",src:"assets/images/karataev.png"},{id:"vpwebsite",src:"assets/images/vpwebsite.png"},{id:"sndClick",src:"assets/sounds/click.ogg"},{id:"sndLevelComplete",src:"assets/sounds/levelComplete.ogg"},{id:"sndLevelFail",src:"assets/sounds/levelFail.ogg"},{id:"sndPop",src:"assets/sounds/pop.ogg"},{id:"sndWobble",src:"assets/sounds/wobble.ogg"},{id:"music",src:"assets/sounds/track.ogg"}];this.queue.on("fileload",this.onFileLoad,this),this.queue.on("complete",this.onComplete,this),this.queue.loadManifest(c)},get:function(a){return this.queue.getResult(a)},onComplete:function(){this.preloader.destroy(),this.callback.call(this.scope)},onFileLoad:function(){this.preloader.update(this.queue.progress)}}),Component=Class.extend({init:function(){},destroy:function(){}}),ComponentBox=Class.extend({init:function(){this.components=[]},addComponent:function(a){this.components.push(a)},removeComponent:function(a){var b=this.components.indexOf(a);this.components.splice(b,1),a.destroy()},destroyComponents:function(){for(;this.components.length>0;){var a=this.components.pop();a.destroy()}},destroy:function(){this.destroyComponents()}});Config.WIDTH=320,Config.HEIGHT=480,Config.VERSION="1.0",Config.CIRCLE_RADIUS=30,Config.BULLET_SPEED=5,Config.TRANSPARENT=!1,Config.ANIMATION=!0,Config.START_LAST_LEVEL=!1,Config.OPEN_ALL_LEVELS=!1,Config.TEST_GAME_COMPLETE=!1,Config.SHOW_FPS=!1;var Game=Class.extend({init:function(){this.createLevels(),this.progress=new GameProgress(this)},loadProgress:function(){console.log("first"),console.log(localStorage["game.version"]),console.log("second")},createLevels:function(){this.levels=[],this.addLevel({name:"First",clicks:4,circles:[{x:224,y:320,shots:0,angle:0,gap:90,armor:0},{x:96,y:320,shots:0,angle:0,gap:90,armor:0},{x:224,y:195,shots:0,angle:0,gap:90,armor:0},{x:96,y:195,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Simple Quad",clicks:1,circles:[{x:64,y:365,shots:1,angle:-90,gap:90,armor:0},{x:255,y:365,shots:1,angle:180,gap:90,armor:0},{x:257,y:174,shots:1,angle:90,gap:90,armor:0},{x:65,y:171,shots:1,angle:0,gap:90,armor:0}]}),this.addLevel({name:"One Quad Touch",clicks:1,circles:[{x:160,y:269,shots:4,angle:0,gap:90,armor:0},{x:160,y:416,shots:0,angle:0,gap:90,armor:0},{x:282,y:272,shots:0,angle:0,gap:90,armor:0},{x:42,y:272,shots:0,angle:0,gap:90,armor:0},{x:160,y:126,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Shooting",clicks:4,circles:[{x:257,y:420,shots:1,angle:180,gap:90,armor:0},{x:257,y:225,shots:1,angle:180,gap:90,armor:0},{x:65,y:421,shots:0,angle:0,gap:90,armor:0},{x:256,y:323,shots:0,angle:0,gap:90,armor:0},{x:64,y:323,shots:1,angle:0,gap:90,armor:0},{x:64,y:226,shots:0,angle:0,gap:90,armor:0},{x:64,y:128,shots:1,angle:0,gap:90,armor:0},{x:258,y:128,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Simple order",clicks:1,circles:[{x:165,y:264,shots:1,angle:180,armor:0},{x:275,y:264,shots:0,angle:0,armor:0},{x:49,y:264,shots:1,angle:0,armor:0}]}),this.addLevel({name:"Medium Quad",clicks:2,circles:[{x:53,y:385,shots:1,angle:-90,gap:90,armor:0},{x:268,y:385,shots:1,angle:180,gap:90,armor:0},{x:268,y:158,shots:1,angle:90,gap:90,armor:0},{x:159,y:267,shots:4,angle:0,gap:90,armor:0},{x:50,y:159,shots:0,angle:0,gap:90,armor:0},{x:161,y:385,shots:0,angle:0,gap:90,armor:0},{x:266,y:269,shots:0,angle:0,gap:90,armor:0},{x:52,y:268,shots:0,angle:0,gap:90,armor:0},{x:163,y:158,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Quads 2 Touch",clicks:2,circles:[{x:122,y:116,shots:0,angle:0,gap:90,armor:0},{x:124,y:429,shots:0,angle:0,gap:90,armor:0},{x:45,y:351,shots:0,angle:0,gap:90,armor:0},{x:284,y:353,shots:0,angle:0,gap:90,armor:0},{x:120,y:351,shots:4,angle:0,gap:90,armor:0},{x:196,y:429,shots:0,angle:0,gap:90,armor:0},{x:40,y:192,shots:0,angle:0,gap:90,armor:0},{x:201,y:116,shots:0,angle:0,gap:90,armor:0},{x:278,y:191,shots:0,angle:0,gap:90,armor:0},{x:200,y:192,shots:4,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Simple order2",clicks:1,circles:[{x:153,y:359,shots:1,angle:-90,armor:0},{x:153,y:278,shots:1,angle:-90,armor:0},{x:153,y:189,shots:1,angle:90,armor:0},{x:153,y:114,shots:1,angle:90,armor:0},{x:154,y:435,shots:0,angle:0,armor:0}]}),this.addLevel({name:"Spiral",clicks:1,circles:[{x:53,y:139,shots:0,angle:0,gap:90,armor:0},{x:129,y:139,shots:1,angle:180,gap:90,armor:0},{x:203,y:139,shots:1,angle:180,gap:90,armor:0},{x:273,y:206,shots:1,angle:-90,gap:90,armor:0},{x:273,y:269,shots:1,angle:-90,gap:90,armor:0},{x:273,y:342,shots:1,angle:-90,gap:90,armor:0},{x:205,y:410,shots:1,angle:0,gap:90,armor:0},{x:134,y:410,shots:1,angle:0,gap:90,armor:0},{x:62,y:344,shots:1,angle:90,gap:90,armor:0},{x:62,y:273,shots:1,angle:90,gap:90,armor:0},{x:129,y:205,shots:1,angle:180,gap:90,armor:0},{x:202,y:273,shots:1,angle:-90,gap:90,armor:0},{x:270,y:139,shots:1,angle:180,gap:90,armor:0},{x:273,y:415,shots:1,angle:-90,gap:90,armor:0},{x:62,y:410,shots:1,angle:0,gap:90,armor:0},{x:57,y:205,shots:1,angle:90,gap:90,armor:0},{x:202,y:346,shots:1,angle:-90,gap:90,armor:0},{x:204,y:205,shots:1,angle:180,gap:90,armor:0},{x:129,y:275,shots:1,angle:90,gap:90,armor:0},{x:129,y:347,shots:1,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Triple Shoot",clicks:3,circles:[{x:258,y:123,shots:0,angle:0,gap:90,armor:0},{x:258,y:427,shots:0,angle:0,gap:90,armor:0},{x:39,y:349,shots:0,angle:0,gap:90,armor:0},{x:110,y:348,shots:0,angle:0,gap:90,armor:0},{x:111,y:273,shots:0,angle:0,gap:90,armor:0},{x:261,y:198,shots:0,angle:0,gap:90,armor:0},{x:259,y:349,shots:4,angle:0,gap:90,armor:0},{x:183,y:272,shots:4,angle:0,gap:90,armor:0},{x:111,y:199,shots:4,angle:0,gap:90,armor:0},{x:40,y:200,shots:0,angle:0,gap:90,armor:0},{x:185,y:348,shots:0,angle:0,gap:90,armor:0},{x:260,y:271,shots:0,angle:0,gap:90,armor:0},{x:109,y:120,shots:0,angle:0,gap:90,armor:0},{x:184,y:197,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Yellow Start",clicks:6,circles:[{x:162,y:264,shots:4,angle:0,gap:90,armor:1},{x:159,y:409,shots:0,angle:0,gap:90,armor:1},{x:277,y:264,shots:0,angle:0,gap:90,armor:1},{x:43,y:264,shots:0,angle:0,gap:90,armor:1},{x:160,y:131,shots:0,angle:0,gap:90,armor:1}]}),this.addLevel({name:"Yellow Intro",clicks:4,circles:[{x:197,y:264,shots:0,angle:0,gap:90,armor:1},{x:127,y:264,shots:0,angle:0,gap:90,armor:1},{x:125,y:412,shots:1,angle:-90,gap:90,armor:0},{x:122,y:111,shots:1,angle:90,gap:90,armor:0},{x:272,y:264,shots:1,angle:180,gap:90,armor:0},{x:48,y:264,shots:1,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Corners",clicks:1,circles:[{x:78,y:121,shots:0,angle:0,gap:90,armor:0},{x:82,y:420,shots:0,angle:0,gap:90,armor:0},{x:82,y:347,shots:2,angle:-90,gap:90,armor:0},{x:188,y:347,shots:2,angle:180,gap:90,armor:0},{x:183,y:194,shots:2,angle:90,gap:90,armor:0},{x:82,y:194,shots:2,angle:0,gap:90,armor:0},{x:191,y:420,shots:0,angle:0,gap:90,armor:0},{x:258,y:347,shots:0,angle:0,gap:90,armor:0},{x:253,y:196,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Many Clicks2",clicks:16,circles:[{x:276,y:392,shots:0,angle:0,gap:90,armor:0},{x:201,y:392,shots:0,angle:0,gap:90,armor:0},{x:124,y:392,shots:0,angle:0,gap:90,armor:0},{x:50,y:392,shots:0,angle:0,gap:90,armor:0},{x:276,y:312,shots:0,angle:0,gap:90,armor:0},{x:201,y:312,shots:0,angle:0,gap:90,armor:0},{x:124,y:312,shots:0,angle:0,gap:90,armor:0},{x:50,y:312,shots:0,angle:0,gap:90,armor:0},{x:276,y:230,shots:0,angle:0,gap:90,armor:0},{x:201,y:230,shots:0,angle:0,gap:90,armor:0},{x:124,y:230,shots:0,angle:0,gap:90,armor:0},{x:50,y:230,shots:0,angle:0,gap:90,armor:0},{x:276,y:154,shots:0,angle:0,gap:90,armor:0},{x:201,y:154,shots:0,angle:0,gap:90,armor:0},{x:124,y:154,shots:0,angle:0,gap:90,armor:0},{x:50,y:154,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Simple Yellow",clicks:1,circles:[{x:68,y:221,shots:0,angle:0,gap:90,armor:1},{x:165,y:221,shots:2,angle:0,gap:180,armor:0},{x:165,y:117,shots:1,angle:90,gap:90,armor:0},{x:165,y:433,shots:0,angle:0,gap:90,armor:0},{x:165,y:327,shots:2,angle:180,gap:90,armor:0},{x:66,y:325,shots:0,angle:0,gap:90,armor:0},{x:269,y:327,shots:1,angle:180,gap:90,armor:0},{x:269,y:221,shots:2,angle:90,gap:90,armor:0}]}),this.addLevel({name:"More Yellow",clicks:1,circles:[{x:148,y:130,shots:0,angle:-90,gap:90,armor:0},{x:148,y:433,shots:0,angle:-90,gap:90,armor:0},{x:243,y:202,shots:1,angle:180,gap:90,armor:0},{x:240,y:282,shots:2,angle:90,gap:180,armor:0},{x:148,y:282,shots:2,angle:0,gap:180,armor:0},{x:51,y:281,shots:2,angle:-45,gap:90,armor:0},{x:146,y:202,shots:1,angle:90,gap:90,armor:1},{x:243,y:365,shots:1,angle:180,gap:90,armor:0},{x:146,y:365,shots:1,angle:-90,gap:90,armor:1}]}),this.addLevel({name:"Yellow Four",clicks:2,circles:[{x:43,y:429,shots:0,angle:0,gap:90,armor:1},{x:267,y:429,shots:1,angle:180,gap:90,armor:0},{x:260,y:123,shots:1,angle:90,gap:90,armor:1},{x:43,y:123,shots:2,angle:0,gap:90,armor:0},{x:158,y:123,shots:2,angle:0,gap:180,armor:1},{x:43,y:276,shots:0,angle:0,gap:90,armor:1},{x:158,y:433,shots:1,angle:-90,gap:90,armor:0},{x:267,y:275,shots:1,angle:180,gap:90,armor:0},{x:157,y:276,shots:4,angle:0,gap:90,armor:1}]}),this.addLevel({name:"Red Intro",clicks:3,circles:[{x:280,y:275,shots:1,angle:180,gap:90,armor:0},{x:155,y:125,shots:1,angle:90,gap:90,armor:0},{x:47,y:277,shots:1,angle:0,gap:90,armor:0},{x:157,y:275,shots:0,angle:0,gap:90,armor:2}]}),this.addLevel({name:"RedQuad",clicks:3,circles:[{x:44,y:373,shots:0,angle:0,gap:90,armor:0},{x:39,y:170,shots:0,angle:0,gap:90,armor:0},{x:278,y:369,shots:0,angle:0,gap:90,armor:0},{x:278,y:170,shots:0,angle:0,gap:90,armor:0},{x:160,y:277,shots:4,angle:45,gap:90,armor:2}]}),this.addLevel({name:"Right Order",clicks:3,circles:[{x:128,y:145,shots:0,angle:0,gap:90,armor:0},{x:201,y:145,shots:0,angle:0,gap:90,armor:0},{x:52,y:380,shots:1,angle:-90,gap:90,armor:0},{x:127,y:379,shots:1,angle:180,gap:90,armor:0},{x:280,y:380,shots:1,angle:-90,gap:90,armor:0},{x:202,y:379,shots:2,angle:0,gap:180,armor:0},{x:202,y:300,shots:1,angle:0,gap:90,armor:0},{x:127,y:300,shots:2,angle:0,gap:180,armor:0},{x:129,y:223,shots:1,angle:180,gap:90,armor:0},{x:206,y:223,shots:1,angle:180,gap:90,armor:0},{x:284,y:223,shots:1,angle:180,gap:90,armor:0},{x:280,y:145,shots:1,angle:180,gap:90,armor:0},{x:49,y:145,shots:1,angle:0,gap:90,armor:0},{x:54,y:223,shots:0,angle:0,gap:90,armor:0},{x:282,y:302,shots:0,angle:0,gap:90,armor:0},{x:50,y:302,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Reds",clicks:4,circles:[{x:206,y:388,shots:0,angle:0,gap:90,armor:1},{x:282,y:306,shots:0,angle:0,gap:90,armor:0},{x:46,y:306,shots:0,angle:0,gap:90,armor:1},{x:118,y:388,shots:0,angle:0,gap:90,armor:0},{x:122,y:139,shots:0,angle:0,gap:90,armor:1},{x:206,y:308,shots:4,angle:0,gap:90,armor:1},{x:46,y:222,shots:0,angle:0,gap:90,armor:1},{x:282,y:222,shots:0,angle:0,gap:90,armor:0},{x:206,y:139,shots:0,angle:0,gap:90,armor:0},{x:121,y:223,shots:4,angle:0,gap:90,armor:0},{x:121,y:308,shots:4,angle:0,gap:90,armor:1},{x:206,y:223,shots:4,angle:0,gap:90,armor:2}]}),this.addLevel({name:"Many Clicks3",clicks:6,circles:[{x:50,y:312,shots:2,angle:90,gap:180,armor:0},{x:199,y:312,shots:4,angle:0,gap:90,armor:0},{x:275,y:233,shots:1,angle:90,gap:90,armor:0},{x:198,y:154,shots:1,angle:0,gap:90,armor:0},{x:122,y:230,shots:2,angle:0,gap:180,armor:0},{x:276,y:392,shots:0,angle:0,gap:90,armor:0},{x:201,y:392,shots:0,angle:0,gap:90,armor:0},{x:124,y:392,shots:0,angle:0,gap:90,armor:0},{x:50,y:392,shots:0,angle:0,gap:90,armor:0},{x:276,y:312,shots:0,angle:0,gap:90,armor:0},{x:124,y:312,shots:0,angle:0,gap:90,armor:0},{x:201,y:230,shots:0,angle:0,gap:90,armor:0},{x:50,y:230,shots:0,angle:0,gap:90,armor:0},{x:276,y:154,shots:0,angle:0,gap:90,armor:0},{x:124,y:154,shots:0,angle:0,gap:90,armor:0},{x:50,y:154,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Reds2",clicks:3,circles:[{x:252,y:267,shots:2,angle:90,gap:180,armor:0},{x:159,y:360,shots:2,angle:0,gap:180,armor:0},{x:74,y:267,shots:2,angle:90,gap:180,armor:0},{x:163,y:171,shots:2,angle:0,gap:180,armor:0},{x:252,y:358,shots:4,angle:0,gap:90,armor:2},{x:73,y:358,shots:4,angle:0,gap:90,armor:2},{x:73,y:173,shots:4,angle:0,gap:90,armor:2},{x:163,y:264,shots:4,angle:0,gap:90,armor:1},{x:250,y:168,shots:4,angle:0,gap:90,armor:2}]}),this.addLevel({name:"Sides",clicks:1,circles:[{x:42,y:434,shots:1,angle:0,gap:90,armor:0},{x:42,y:131,shots:1,angle:0,gap:90,armor:0},{x:278,y:433,shots:0,angle:0,gap:90,armor:0},{x:282,y:129,shots:0,angle:0,gap:90,armor:0},{x:204,y:284,shots:2,angle:180,gap:180,armor:0},{x:285,y:284,shots:1,angle:180,gap:90,armor:0},{x:120,y:284,shots:2,angle:180,gap:180,armor:0},{x:46,y:286,shots:2,angle:90,gap:180,armor:2}]}),this.addLevel({name:"Blue Intro",clicks:1,circles:[{x:159,y:430,shots:1,angle:-90,gap:90,armor:0},{x:163,y:115,shots:2,angle:0,gap:90,armor:0},{x:276,y:270,shots:2,angle:90,gap:90,armor:0},{x:44,y:274,shots:2,angle:-90,gap:90,armor:0},{x:48,y:430,shots:1,angle:-90,gap:90,armor:0},{x:162,y:274,shots:0,angle:0,gap:90,armor:3},{x:275,y:115,shots:1,angle:90,gap:90,armor:0},{x:48,y:115,shots:1,angle:0,gap:90,armor:0},{x:273,y:430,shots:1,angle:180,gap:90,armor:0}]}),this.addLevel({name:"Many Clicks",clicks:16,circles:[{x:87,y:329,shots:0,angle:0,gap:90,armor:3},{x:232,y:329,shots:0,angle:0,gap:90,armor:3},{x:232,y:174,shots:0,angle:0,gap:90,armor:3},{x:86,y:174,shots:0,angle:0,gap:90,armor:3}]}),this.addLevel({name:"Shooting 2",clicks:1,circles:[{x:48,y:437,shots:1,angle:-90,gap:90,armor:0},{x:282,y:437,shots:2,angle:180,gap:90,armor:0},{x:128,y:436,shots:2,angle:180,gap:90,armor:0},{x:207,y:436,shots:2,angle:180,gap:90,armor:0},{x:284,y:360,shots:2,angle:-90,gap:180,armor:0},{x:209,y:363,shots:2,angle:-90,gap:90,armor:0},{x:127,y:363,shots:2,angle:-90,gap:90,armor:0},{x:48,y:363,shots:2,angle:-90,gap:90,armor:0},{x:50,y:287,shots:2,angle:-90,gap:180,armor:0},{x:282,y:288,shots:2,angle:180,gap:90,armor:0},{x:128,y:287,shots:2,angle:180,gap:90,armor:0},{x:207,y:287,shots:2,angle:180,gap:90,armor:0},{x:282,y:204,shots:2,angle:-90,gap:180,armor:0},{x:207,y:207,shots:2,angle:-90,gap:90,armor:0},{x:125,y:207,shots:2,angle:-90,gap:90,armor:0},{x:46,y:207,shots:2,angle:-90,gap:90,armor:0},{x:280,y:118,shots:0,angle:0,gap:90,armor:3},{x:203,y:118,shots:0,angle:0,gap:90,armor:3},{x:123,y:118,shots:0,angle:0,gap:90,armor:3},{x:45,y:118,shots:0,angle:0,gap:90,armor:3}]}),this.curLevel=void 0},addLevel:function(a){var b=this.levels.length,c=new Level(b,a);this.levels.push(c)},levelStart:function(a){this.curLevel=this.levels[a],this.clicks=this.curLevel.clicks,this.isLevelCompleted=!1,this.isLevelFailed=!1,this.levelView=new LevelView(this),Main.addView(this.levelView)},levelAbort:function(){Main.removeViewByClass(LevelView),Main.removeViewByClass(LevelCompleteView),Main.removeViewByClass(LevelFailView),Main.removeViewByClass(PauseView),Main.removeViewByClass(GameCompleteView)},levelNext:function(){var a=this.curLevel.id;this.levelAbort(),a==this.levels.length-1?this.gameComplete():this.levelStart(a+1)},bulletOutOfBounds:function(a){this.levelView.removeComponent(a),this.maybeLevelEnd()},circleBulletCollision:function(a,b){this.levelView.removeComponent(b),this.removeCircle(a)},circleClicked:function(a){this.clicks>0?(this.clicks--,this.levelView.updateClicksText(),this.removeCircle(a)):this.levelView.noClicksLeft()},removeCircle:function(a){a.explode(),this.maybeLevelEnd()},maybeLevelEnd:function(){this.isLevelCompleted||this.isLevelFailed||(this.levelView.noCircles()?this.levelComplete():0==this.clicks&&this.levelView.noBullets()&&this.levelFail())},levelComplete:function(){this.isLevelCompleted=!0,this.curLevel.isCompleted=!0,this.progress.levelComplete(),Main.addView(new LevelCompleteView(this)),Sounds.play("sndLevelComplete")},levelFail:function(){this.isLevelFailed=!0,Main.addView(new LevelFailView(this)),Sounds.play("sndLevelFail")},gameComplete:function(){Main.addView(new GameCompleteView(this))},gameAbort:function(){this.levelAbort(),Main.addView(new LevelSelectView(this))}}),GameProgress=Class.extend({init:function(a){this.game=a,this.initSound(),this.initLevels()},initSound:function(){Sounds.soundEnabled="false"==localStorage["game.soundEnabled"]?!1:!0},saveSound:function(){localStorage["game.soundEnabled"]=Sounds.soundEnabled},initLevels:function(){if(void 0!=localStorage["game.levels"])for(var a=0;a<this.game.levels.length;a++){var b=this.game.levels[a];"true"==localStorage["game.levels."+a+".isCompleted"]&&(b.isOpen=!0,b.isCompleted=!0)}this.updateOpenLevels()},updateOpenLevels:function(){var a,b;if(Config.OPEN_ALL_LEVELS)for(a=0;a<this.game.levels.length;a++)b=this.game.levels[a],b.isOpen=!0;else for(a=0;a<this.game.levels.length;a++)if(b=this.game.levels[a],!b.isCompleted){b.isOpen=!0;break}},levelComplete:function(){localStorage["game.levels"]="true";var a=this.game.curLevel.id;localStorage["game.levels."+a+".isCompleted"]="true",this.updateOpenLevels()},traceLevels:function(){for(var a=0;a<this.game.levels.length;a++){var b=this.game.levels[a];console.log(b.id+" "+b.isCompleted)}},clear:function(){localStorage.clear(),this.uncompleteLevels(),this.updateOpenLevels()},uncompleteLevels:function(){for(var a=0;a<this.game.levels.length;a++){var b=this.game.levels[a];b.isCompleted=!1,b.isOpen=!1}}}),Level=Class.extend({init:function(a,b){this.id=a,this.data=b,this.clicks=b.clicks,this.isCompleted=!1,this.isOpen=!1}}),gameDiv,canvas,stage,assets,Main=ComponentBox.extend({init:function(){this._super(),this.zzz="Boo!",gameDiv=document.getElementById("gameArea"),canvas=document.getElementById("gameCanvas"),stage=new createjs.Stage(canvas);new Resizer;createjs.Touch.enable(stage),createjs.Ticker.setFPS(60),stage.enableMouseOver(10),createjs.Ticker.on("tick",this.tick),assets=new Assets(this.preloaderComplete,this)},testFunc:function(a,b){console.log("Name "+a+", profession "+b+". "+this.zzz)},preloaderComplete:function(){Config.TRANSPARENT&&(stage.alpha=.5),Main.views=[],Main.backContainer=new createjs.Container,Main.viewContainer=new createjs.Container,Main.topContainer=new createjs.Container,Main.fpsContainer=new createjs.Container,stage.addChild(Main.backContainer),stage.addChild(Main.viewContainer),stage.addChild(Main.topContainer),stage.addChild(Main.fpsContainer),Fader.init(),Config.SHOW_FPS&&Main.addView(new FPSView),this.game=new Game,Main.addView(new MainMenuView(this.game)),Sounds.startMusic(),this.addComponent(new Background),$(window).on("blur",$.proxy(this.onBlur,this)),$(window).on("focus",$.proxy(this.onFocus,this))},onBlur:function(){Main.FOCUS&&(Main.FOCUS=!1,Sounds.stopMusic())},onFocus:function(){0==Main.FOCUS&&(Main.FOCUS=!0,Sounds.startMusic())},tick:function(a){stage.update(a)}});Main.FOCUS=!0,Main.addView=function(a){Main.views.push(a)},Main.removeViewByClass=function(a){for(var b=Main.views.length-1;b>=0;b--){var c=Main.views[b];if(c instanceof a){Main.views.splice(b,1),c.destroy();break}}},Main.getViewByClass=function(a){for(var b=Main.views.length-1;b>=0;b--){var c=Main.views[b];if(c instanceof a)return c}return null};var Preloader=Class.extend({init:function(){var a=20,b=200,c=(Config.WIDTH-b)/2,d=Config.HEIGHT/2-20,e=a+10,f=b+10,g=(Config.WIDTH-f)/2,h=Config.HEIGHT/2-25;this.loaderEdge=new createjs.Shape,/*this.loaderEdge.graphics.setStrokeStyle(2).beginStroke("#ffffff").drawRect(g,h,f,e).endStroke(),*/stage.addChild(this.loaderEdge),this.loaderBar=new createjs.Shape,this.loaderBar.graphics.beginFill("#333333").drawRoundRect(0,d,b,a,10).endFill(),this.loaderBar.x=c,this.loaderBar.scaleX=0,stage.addChild(this.loaderBar),this.percentTf=new createjs.Text("0%","35px Arial","#333333"),this.percentTf.textAlign="center",this.percentTf.x=Config.WIDTH/2,this.percentTf.y=Config.HEIGHT/2-80,stage.addChild(this.percentTf);var i=this.percentTf.y;createjs.Tween.get(this.percentTf,{loop:!0}).to({y:i-10},1e3,createjs.Ease.sineInOut).to({y:i},1e3,createjs.Ease.sineInOut)},update:function(a){var b=Math.round(100*a);this.percentTf.text=b+"%",this.loaderBar.scaleX=a,stage.update()},destroy:function(){createjs.Tween.removeTweens(this.percentTf),stage.removeChild(this.loaderEdge),stage.removeChild(this.loaderBar),stage.removeChild(this.percentTf),stage.update()}}),Resizer=Class.extend({init:function(){Resizer.onResize=this.onResize,window.onresize=Resizer.onResize,this.onResize()},onResize:function(){var a=window.innerWidth,b=window.innerHeight,c=Config.WIDTH,d=Config.HEIGHT,e=Math.min(a/c,b/d),f=c*e,g=d*e;gameDiv.style.width=f+"px",gameDiv.style.height=g+"px",gameDiv.style.marginTop=-g/2+"px",gameDiv.style.marginLeft=-f/2+"px",stage.scaleX=e,stage.scaleY=e,stage.canvas.width=f,stage.canvas.height=g,stage.update()}}),Sounds=Class.extend({});Sounds.soundEnabled=!0,Sounds.musicChannel=void 0,Sounds.play=function(a){if(Sounds.soundEnabled){createjs.Sound.play(a)}},Sounds.toggle=function(){Sounds.soundEnabled=!Sounds.soundEnabled,Sounds.soundEnabled?Sounds.startMusic():Sounds.stopMusic()},Sounds.startMusic=function(){Sounds.soundEnabled&&(Sounds.musicChannel=createjs.Sound.play("music",{loop:-1,volume:.2}))},Sounds.stopMusic=function(){Sounds.musicChannel&&Sounds.musicChannel.stop()};var Background=ComponentBox.extend({init:function(){this._super(),this.container=new createjs.Container,Main.backContainer.addChild(this.container),this.addComponent(new Picture(this.container,"background")),this.cloud1=new Cloud(this.container,1),this.addComponent(this.cloud1),this.cloud2=new Cloud(this.container,2),this.addComponent(this.cloud2),this.cloud3=new Cloud(this.container,3),this.addComponent(this.cloud3),this.cloud4=new Cloud(this.container,4),this.addComponent(this.cloud4),this.tickListener=createjs.Ticker.on("tick",this.tick,this)},tick:function(){this.cloud1.update(),this.cloud2.update(),this.cloud3.update(),this.cloud4.update()},destroy:function(){this._super(),createjs.Ticker.off("tick",this.tickListener),Main.backContainer.removeChild(this.container)}}),Bullet=ComponentBox.extend({init:function(a,b,c,d,e,f,g,h){this.game=a,this.view=b,this.parent=c,this.x=d,this.y=e,this.dx=f,this.dy=g,this._super(),this.pic=new Picture(this.parent,"bullet",{x:d,y:e,center:!0}),this.pic.bitmap.rotation=h,this.addComponent(this.pic)},update:function(){var a=1;this.x+=this.dx*a,this.y+=this.dy*a,this.pic.setPos(this.x,this.y);var b=Config.WIDTH,c=Config.HEIGHT;(this.x<0||this.x>b||this.y<0||this.y>c)&&this.game.bulletOutOfBounds(this)},destroy:function(){this._super()}}),Button=Component.extend({init:function(a,b,c,d,e){if(this.parent=a,this.assetName=b,this.callback=c,this.scope=d,this.x=0,this.y=0,this.center=!1,e&&(void 0!=e.x&&(this.x=e.x),void 0!=e.y&&(this.y=e.y),void 0!=e.center&&(this.center=e.center)),this.bmp=new createjs.Bitmap(assets.get(this.assetName)),this.bmp.x=this.x,this.bmp.y=this.y,this.parent.addChild(this.bmp),this.center){var f=this.bmp.image.width,g=this.bmp.image.height;this.bmp.regX=f/2,this.bmp.regY=g/2}this.enableClick(),this.bmp.cursor="pointer"},hide:function(){this.bmp.visible=!1},show:function(){this.bmp.visible=!0},scaleHide:function(){this.bmp.scaleX=this.bmp.scaleY=1,createjs.Tween.get(this.bmp).to({scaleX:0,scaleY:0},200)},scaleShow:function(){this.bmp.visible=!0,this.bmp.scaleX=this.bmp.scaleY=0,createjs.Tween.get(this.bmp).to({scaleX:1,scaleY:1},200)},enableClick:function(){this.bmp.addEventListener("click",this)},disableClick:function(){this.bmp.removeEventListener("click",this)},handleEvent:function(a){switch(a.type){case"click":Sounds.play("sndClick"),this.callback.call(this.scope,this)}},destroy:function(){this.disableClick(),this.parent.removeChild(this.bmp)}}),Circle=ComponentBox.extend({init:function(a,b,c,d){this.game=a,this.view=b,this.parent=c,this.x=0,this.y=0,this.shots=0,this.angle=0,this.armor=0,this.gap=90,this.wobble=!1,d&&(void 0!=d.x&&(this.x=d.x),void 0!=d.y&&(this.y=d.y),void 0!=d.shots&&(this.shots=d.shots),void 0!=d.angle&&(this.angle=d.angle),void 0!=d.gap&&(this.gap=d.gap),void 0!=d.armor&&(this.armor=d.armor),void 0!=d.wobble&&(this.wobble=d.wobble)),this._super(),0==this.armor?this.assetName="circle":1==this.armor?this.assetName="circle2":2==this.armor?this.assetName="circle3":3==this.armor&&(this.assetName="circle4"),this.holder=new createjs.Container,this.holder.x=this.x,this.holder.y=this.y,this.parent.addChild(this.holder),this.parse(),this.pic=new Picture(this.holder,this.assetName,{x:0,y:0,center:!0}),this.addComponent(this.pic),this.addComponent(new Eyes(this.holder,-Config.CIRCLE_RADIUS,-Config.CIRCLE_RADIUS,this.armor,!0)),this.pic.bitmap.addEventListener("click",this),this.wobble?(Sounds.play("sndWobble"),this.doWobble()):this.tweenBorn()},tweenBorn:function(){this.holder.scaleX=this.holder.scaleY=0,createjs.Tween.get(this.holder).to({scaleX:1,scaleY:1},500,createjs.Ease.backOut)},doWobble:function(){for(var a=110,b=createjs.Tween.get(this.holder),c=1,d=1,e=0;10>e;e++)e%2==0?(c=1.1-.01*e,d=.9+.01*e):(c=.9+.01*e,d=1.1-.01*e),b=b.to({scaleX:c,scaleY:d},a)},parse:function(){for(var a=(this.x,this.y,Config.CIRCLE_RADIUS),b=0;b<this.shots;b++){var c=(b*this.gap+this.angle)*Math.PI/180,d=Math.cos(c)*a,e=Math.sin(c)*a;this.addPicBullet(d,e,c)}},addPicBullet:function(a,b,c){var d=new Picture(this.holder,"bullet",{x:a,y:b,center:!0});d.bitmap.rotation=180*c/Math.PI,this.addComponent(d)},handleEvent:function(a){switch(a.type){case"click":this.game.circleClicked(this)}},explode:function(){if(this.view.removeComponent(this),this.armor>0){var a=this.armor-1;this.view.addCircle(this.x,this.y,this.shots,this.angle,this.gap,a,!0)}else{this.view.addComponent(new CircleExplode(this.view,this.parent,this.assetName,this.x,this.y,this.armor)),Sounds.play("sndPop");for(var b=0;b<this.shots;b++)this.view.addBullet(this.x,this.y,b*this.gap+this.angle)}},destroy:function(){this.pic.bitmap.removeEventListener("click",this),this._super(),this.parent.removeChild(this.holder)}}),CircleExplode=ComponentBox.extend({init:function(a,b,c,d,e,f){this._super(),this.view=a,this.parent=b,this.armor=f,this.holder=new createjs.Container,this.holder.x=d,this.holder.y=e,this.parent.addChild(this.holder),this.pic=new Picture(this.holder,c,{x:0,y:0,center:!0}),this.addComponent(this.pic),this.addComponent(new Eyes(this.holder,-Config.CIRCLE_RADIUS,-Config.CIRCLE_RADIUS,this.armor,!1)),createjs.Tween.get(this.holder).to({scaleX:2,scaleY:2,alpha:0},200).call(this.complete,[],this)},complete:function(){this.view.removeComponent(this)},destroy:function(){this._super(),this.parent.removeChild(this.holder)}}),CircleParticle=ComponentBox.extend({init:function(a,b,c){this.game=a,this.parent=b,this.emitter=c,this._super();var d=Config.CIRCLE_RADIUS,e=d+Math.floor(Math.random()*(Config.WIDTH-2*d)),f=Config.HEIGHT+d;this.dx=.01*(Config.WIDTH/2-e),this.dy=-(6+5*Math.random()),this.acc=Math.abs(.1),this.dangle=-5+10*Math.random(),this.holder=new createjs.Container,this.holder.x=e,this.holder.y=f,this.parent.addChild(this.holder),this.assetName="circle";var g=Math.floor(4*Math.random());0==g?this.assetName="circle":1==g?this.assetName="circle2":2==g?this.assetName="circle3":3==g&&(this.assetName="circle4"),this.addComponent(new Picture(this.holder,this.assetName,{center:!0})),this.addComponent(new Eyes(this.holder,-Config.CIRCLE_RADIUS,-Config.CIRCLE_RADIUS,g,!1)),this.holder.scaleX=this.holder.scaleY=.5+.5*Math.random()},update:function(){this.holder.y+=this.dy,this.holder.x+=this.dx,this.holder.rotation+=this.dangle,this.dy+=this.acc,this.holder.y>=Config.HEIGHT+100&&this.emitter.removeComponent(this)},destroy:function(){this._super(),this.parent.removeChild(this.holder)}}),CirclesEmitter=ComponentBox.extend({init:function(a,b){this.game=a,this.parent=b,this._super(),this.delay=1,this.tickListener=createjs.Ticker.on("tick",this.tick,this)},tick:function(){this.delay--,this.delay<=0&&(this.delay=30+Math.floor(20*Math.random()),this.createParticle()),this.updateParticles()},createParticle:function(){var a=new CircleParticle(this.game,this.parent,this);this.addComponent(a)},updateParticles:function(){for(var a=this.components.length-1;a>=0;a--){var b=this.components[a];b.update()}},destroy:function(){this._super(),createjs.Ticker.off("tick",this.tickListener)}}),Cloud=ComponentBox.extend({init:function(a,b){this.parent=a,this.id=b,this._super(),this.speed=.5/b,this.assetName="",1==this.id?this.assetName="cloud1":2==this.id?this.assetName="cloud2":3==this.id?this.assetName="cloud3":4==this.id&&(this.assetName="cloud4"),this.pic=new Picture(this.parent,this.assetName),this.addComponent(this.pic),this.width=this.pic.bitmap.image.width,this.height=this.pic.bitmap.image.height;var c=Math.floor(Math.random()*Config.WIDTH),d=Math.floor(Math.random()*(350-this.height));this.pic.setPos(c,d)},update:function(){this.pic.bitmap.x+=this.speed,this.pic.bitmap.x>Config.WIDTH&&this.resetPos()},resetPos:function(){this.pic.bitmap.x=-this.width,this.pic.bitmap.y=Math.floor(Math.random()*(350-this.height))}}),Eyes=ComponentBox.extend({init:function(a,b,c,d,e){this.parent=a,this.x=b,this.y=c,this.shouldBlink=e,this.armor=d,this._super(),this.anim=new createjs.Sprite(Eyes.getSpriteSheet(),"idle"+this.armor),this.anim.x=this.x,this.anim.y=this.y,this.parent.addChild(this.anim),this.shouldBlink&&this.waitForBlink()},waitForBlink:function(){var a=3e3+Math.floor(3e3*Math.random());createjs.Tween.get(this.anim).wait(a).call(this.blink,[],this)},blink:function(){this.anim.gotoAndPlay("blink"+this.armor),this.waitForBlink()},destroy:function(){this._super(),this.parent.removeChild(this.anim)
}});Eyes.getSpriteSheet=function(){if(void 0==Eyes.spriteSheet){var a={framerate:15,images:["assets/images/eyesAnim.png"],frames:{width:60,height:60},animations:{blink0:{frames:[0,1,2,3],next:"idle0"},idle0:{frames:[0]},blink1:{frames:[0,1,2,3],next:"idle1"},idle1:{frames:[0]},blink2:{frames:[0,1,2,3],next:"idle2"},idle2:{frames:[0]},blink3:{frames:[0,1,2,3],next:"idle3"},idle3:{frames:[0]}}};Eyes.spriteSheet=new createjs.SpriteSheet(a)}return Eyes.spriteSheet};var LevelItem=ComponentBox.extend({init:function(a,b,c,d,e){if(this.game=a,this.parent=b,this.level=c,this._super(),this.holder=new createjs.Container,this.holder.x=d,this.holder.y=e,this.parent.addChild(this.holder),c.isOpen){var f,g="#000000";c.isCompleted?(f="levelItemCompleteBack",g="#39541D"):(f="levelItemBack",g="#212A56"),this.addComponent(new Button(this.holder,f,this.click,this,{center:!0}));var h=this.level.id+1;this.addComponent(new TextField(this.holder,h,{align:"center",baseline:"middle",color:g,font:"30px Ubuntu Condensed"}))}else this.addComponent(new Picture(this.holder,"levelItemLockedBack",{center:!0}))},click:function(){Fader.fade(this.levelStart,this)},levelStart:function(){Main.removeViewByClass(LevelSelectView),this.game.levelStart(this.level.id)},destroy:function(){this._super(),this.parent.removeChild(this.holder)}}),LevelsGroup=ComponentBox.extend({init:function(a,b,c){this.id=a,this.game=b,this.parent=c,this._super(),this.holder=new createjs.Container,this.holder.y=this.id*Config.HEIGHT,this.parent.addChild(this.holder);for(var d=3,e=100,f=100,g=(Config.WIDTH-e*(d-1))/2,h=120,i=9*this.id,j=9*(this.id+1),k=0,l=i;j>l;l++){var m=this.game.levels[l],n=g+k%d*e,o=h+Math.floor(k/d)*f,p=new LevelItem(this.game,this.holder,m,n,o);this.addComponent(p),k++}},destroy:function(){this._super(),this.parent.removeChild(this.holder)}}),Picture=Component.extend({init:function(a,b,c){if(this.parent=a,this.assetName=b,this.x=0,this.y=0,this.center=!1,this.childIndex=this.parent.getNumChildren(),c&&(void 0!=c.x&&(this.x=c.x),void 0!=c.y&&(this.y=c.y),void 0!=c.center&&(this.center=c.center),void 0!=c.childIndex&&(this.childIndex=c.childIndex)),this.bitmap=new createjs.Bitmap(assets.get(b)),this.bitmap.x=this.x,this.bitmap.y=this.y,this.parent.addChildAt(this.bitmap,this.childIndex),this.center){var d=this.bitmap.image.width,e=this.bitmap.image.height;this.bitmap.regX=d/2,this.bitmap.regY=e/2}},setPos:function(a,b){this.bitmap.x=a,this.bitmap.y=b},destroy:function(){this.parent.removeChild(this.bitmap)}}),SoundIcon=Component.extend({init:function(a,b,c,d){this.parent=b,this.game=a,this.holder=new createjs.Container,this.parent.addChild(this.holder),this.holder.x=c,this.holder.y=d,this.bmpOn=new createjs.Bitmap(assets.get("soundIconOn")),this.holder.addChild(this.bmpOn),this.bmpOff=new createjs.Bitmap(assets.get("soundIconOff")),this.holder.addChild(this.bmpOff),this.updateIcon(),this.holder.addEventListener("click",this)},updateIcon:function(){Sounds.soundEnabled?(this.bmpOn.visible=!0,this.bmpOff.visible=!1):(this.bmpOn.visible=!1,this.bmpOff.visible=!0)},handleEvent:function(a){switch(a.type){case"click":Sounds.toggle(),Sounds.play("sndClick"),this.game.progress.saveSound(),this.updateIcon()}},destroy:function(){this.holder.removeEventListener("click",this),this.parent.removeChild(this.holder)}}),TextField=Component.extend({init:function(a,b,c){this.parent=a,this.x=0,this.y=0,this.color=TextField.defaultColor,this.font=TextField.defaultFont,this.align=TextField.defaultAlign,this.baseline=TextField.defaultBaseline,this.shadow=!1,c&&(c.color&&(this.color=c.color),c.x&&(this.x=c.x),c.y&&(this.y=c.y),c.font&&(this.font=c.font),c.align&&(this.align=c.align),c.baseline&&(this.baseline=c.baseline),void 0!=c.shadow&&(this.shadow=c.shadow)),this.tf=new createjs.Text(b,this.font,this.color),this.tf.x=this.x,this.tf.y=this.y,this.tf.textAlign=this.align,this.tf.textBaseline=this.baseline,this.shadow&&(this.tf.shadow=new createjs.Shadow("#000000",3,3,2)),this.parent.addChild(this.tf)},setText:function(a){this.tf.text=a},destroy:function(){this.parent.removeChild(this.tf)}});TextField.defaultColor="#000000",TextField.defaultFont="bold 30px Arial",TextField.defaultAlign="left",TextField.defaultBaseline="top";var Tutorial=ComponentBox.extend({init:function(a,b){this.game=a,this.parent=b,this._super(),0==this.game.curLevel.id&&this.addText("Tap jelly to clear the area!")},addText:function(a){this.addComponent(new TextField(this.parent,a,{x:Config.WIDTH/2,y:240,align:"center",font:"22px Ubuntu Condensed",color:"#FFFFFF",shadow:!0}))}}),CreditsView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.parent=Main.viewContainer,this.pic=new Picture(this.parent,"blackBack"),this.addComponent(this.pic),this.pic.bitmap.addEventListener("click",this),this.holder=new createjs.Container,this.holder.x=28,this.holder.y=45,this.parent.addChild(this.holder),this.addComponent(new Picture(this.holder,"creditsInner")),this.addComponent(new Button(this.holder,"closeButton",this.closeClick,this,{x:245,y:18,center:!0})),this.logoBt=new Button(this.holder,"vpLogo",this.logoClick,this,{x:48,y:66}),this.addComponent(this.logoBt),this.addHitArea(this.logoBt.bmp),this.karataevBt=new Button(this.holder,"karataev",this.karataevClick,this,{x:18,y:275}),this.addComponent(this.karataevBt),this.addHitArea(this.karataevBt.bmp),this.addComponent(new Picture(this.holder,"vpwebsite",{x:36,y:338})),this.vpwebsiteBt=new Button(this.holder,"vpwebsite",this.vpwebsiteClick,this,{x:36,y:338}),this.addHitArea(this.vpwebsiteBt.bmp);var b=this.holder.y;this.holder.y=Config.HEIGHT,createjs.Tween.get(this.holder).to({y:b},1e3,createjs.Ease.backOut),this.pic.bitmap.alpha=0,createjs.Tween.get(this.pic.bitmap).to({alpha:1},500)},addHitArea:function(a){var b=new createjs.Shape;b.graphics.beginFill("#000").drawRect(0,0,a.image.width,a.image.height),a.hitArea=b},karataevClick:function(){window.location.href="mailto:vincentpalcon@gmail.com"},vpwebsiteClick:function(){window.open("http://www.vincentpalcon.tk","_blank")},logoClick:function(){window.open("http://github.com/vincentpalcon","_blank")},closeClick:function(){Main.removeViewByClass(CreditsView)},handleEvent:function(a){switch(a.type){case"click":}},destroy:function(){this._super(),this.parent.removeChild(this.holder),this.pic.bitmap.removeEventListener("click",this)}}),DeleteProgressView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.parent=Main.viewContainer,this.pic=new Picture(this.parent,"blackBack"),this.addComponent(this.pic),this.pic.bitmap.addEventListener("click",this),this.holder=new createjs.Container,this.holder.x=50,this.holder.y=240,this.parent.addChild(this.holder),this.addComponent(new Picture(this.holder,"deleteProgressInner")),this.addComponent(new Button(this.holder,"yesButton",this.yesClick,this,{x:60,y:135,center:!0})),this.addComponent(new Button(this.holder,"noButton",this.noClick,this,{x:160,y:135,center:!0}));var b=this.holder.y;this.holder.y=Config.HEIGHT,createjs.Tween.get(this.holder).to({y:b},1e3,createjs.Ease.backOut),this.pic.bitmap.alpha=0,createjs.Tween.get(this.pic.bitmap).to({alpha:1},500)},yesClick:function(){this.game.progress.clear(),Main.removeViewByClass(DeleteProgressView)},noClick:function(){Main.removeViewByClass(DeleteProgressView)},handleEvent:function(a){switch(a.type){case"click":}},destroy:function(){this._super(),this.parent.removeChild(this.holder),this.pic.bitmap.removeEventListener("click",this)}}),FPSView=ComponentBox.extend({init:function(){this._super(),this.fpsLabel=new TextField(Main.fpsContainer,"FPS",{x:0,y:460,font:"bold 18px Arial"}),this.addComponent(this.fpsLabel),this.tickRef=createjs.Ticker.on("tick",this.tick,this)},tick:function(){var a=Math.round(createjs.Ticker.getMeasuredFPS());this.fpsLabel.setText("FPS "+a)},destroy:function(){this._super(),createjs.Ticker.off("tick",this.tickRef)}}),Fader=Class.extend({});Fader.init=function(){Fader.pic=new Picture(Main.fpsContainer,"fader"),Fader.pic.bitmap.addEventListener("click",Fader),Fader.pic.bitmap.visible=!1},Fader.handleEvent=function(){},Fader.fade=function(a,b){Fader.pic.bitmap.visible=!0,Fader.pic.bitmap.alpha=0,createjs.Tween.get(Fader.pic.bitmap).to({alpha:1},300).call(a,[],b).to({alpha:0},300).call(Fader.fadeComplete)},Fader.fadeComplete=function(){Fader.pic.bitmap.visible=!1};var GameCompleteView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.parent=Main.viewContainer,this.circlesHolder=new createjs.Container,this.parent.addChild(this.circlesHolder),this.holder=new createjs.Container,this.holder.x=50,this.holder.y=340,this.parent.addChild(this.holder),this.addComponent(new Picture(this.holder,"gameCompleteInner")),this.addComponent(new Button(this.holder,"exit2Button",this.exitClick,this,{x:110,y:85,center:!0}));var b=this.holder.y;this.holder.y=Config.HEIGHT,createjs.Tween.get(this.holder).to({y:b},1e3,createjs.Ease.backOut),this.addComponent(new CirclesEmitter(this.game,this.circlesHolder))},exitClick:function(){Fader.fade(this.goExit,this)},goExit:function(){this.game.gameAbort()},destroy:function(){this._super(),this.parent.removeChild(this.holder),this.parent.removeChild(this.circlesHolder)}}),LevelCompleteView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.holder=new createjs.Container,this.holder.x=50,this.holder.y=330,Main.viewContainer.addChild(this.holder),this.addComponent(new Picture(this.holder,"levelCompleteInner",{x:0,y:0})),this.addComponent(new Button(this.holder,"nextButton",this.nextClick,this,{x:110,y:90,center:!0}));var b=this.holder.y;this.holder.y=500,createjs.Tween.get(this.holder).to({y:b},1e3,createjs.Ease.backOut)},nextClick:function(){this.game.levelNext()},destroy:function(){this._super(),Main.viewContainer.removeChild(this.holder)}}),LevelFailView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.holder=new createjs.Container,this.holder.x=50,this.holder.y=330,Main.viewContainer.addChild(this.holder),this.addComponent(new Picture(this.holder,"levelFailInner",{x:0,y:0})),this.addComponent(new Button(this.holder,"restartButton",this.restartClick,this,{x:110,y:90,center:!0}));var b=this.holder.y;this.holder.y=500,createjs.Tween.get(this.holder).to({y:b},1e3,createjs.Ease.backOut)},restartClick:function(){var a=this.game.curLevel.id;this.game.levelAbort(),this.game.levelStart(a)},destroy:function(){this._super(),Main.viewContainer.removeChild(this.holder)}}),LevelSelectView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.itemsContainer=new createjs.Container,Main.viewContainer.addChild(this.itemsContainer),this.groups=[];for(var b=0;3>b;b++){var c=new LevelsGroup(b,this.game,this.itemsContainer);this.addComponent(c),this.groups.push(c)}this.addComponent(new Picture(Main.viewContainer,"levelSelectTitle",{x:0,y:10}));var d=new Button(Main.viewContainer,"homeButton",this.homeClick,this,{x:40,y:440,center:!0});this.addComponent(d),this.scrollUp=new Button(Main.viewContainer,"upButton",this.scrollUpClick,this,{x:280,y:440,center:!0}),this.addComponent(this.scrollUp),this.scrollDown=new Button(Main.viewContainer,"downButton",this.scrollDownClick,this,{x:205,y:440,center:!0}),this.addComponent(this.scrollDown),this.itemsContainer.y=-Config.HEIGHT*LevelSelectView.CURRENT_GROUP_ID,0==LevelSelectView.CURRENT_GROUP_ID?this.scrollUp.hide():2==LevelSelectView.CURRENT_GROUP_ID&&this.scrollDown.hide()},scrollUpClick:function(){1==LevelSelectView.CURRENT_GROUP_ID?this.scrollUp.scaleHide():2==LevelSelectView.CURRENT_GROUP_ID&&this.scrollDown.scaleShow(),LevelSelectView.CURRENT_GROUP_ID--,this.scrollUp.disableClick(),this.scrollDown.disableClick(),createjs.Tween.get(this.itemsContainer).to({y:-Config.HEIGHT*LevelSelectView.CURRENT_GROUP_ID},500,createjs.Ease.quadInOut).call(this.scrollComplete,[],this)},scrollDownClick:function(){0==LevelSelectView.CURRENT_GROUP_ID?this.scrollUp.scaleShow():1==LevelSelectView.CURRENT_GROUP_ID&&this.scrollDown.scaleHide(),LevelSelectView.CURRENT_GROUP_ID++,this.scrollUp.disableClick(),this.scrollDown.disableClick(),createjs.Tween.get(this.itemsContainer).to({y:-Config.HEIGHT*LevelSelectView.CURRENT_GROUP_ID},500,createjs.Ease.quadInOut).call(this.scrollComplete,[],this)},scrollComplete:function(){this.scrollUp.enableClick(),this.scrollDown.enableClick()},homeClick:function(){Fader.fade(this.goHome,this)},goHome:function(){Main.removeViewByClass(LevelSelectView),Main.addView(new MainMenuView(this.game))},gameStart:function(){Main.removeViewByClass(MainMenuView),this.game.levelStart(0)},destroy:function(){this._super(),Main.viewContainer.removeChild(this.itemsContainer)}});LevelSelectView.CURRENT_GROUP_ID=0;var LevelView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.addComponent(new Button(Main.viewContainer,"restartButton",this.restartClick,this,{x:190,y:5})),this.addComponent(new Button(Main.viewContainer,"pauseButton",this.pauseClick,this,{x:255,y:5})),this.addComponent(new SoundIcon(this.game,Main.viewContainer,125,5));var b="Level: "+(this.game.curLevel.id+1);this.levelNumText=new TextField(Main.viewContainer,b,{x:10,y:5,font:"30px Ubuntu Condensed",color:"#FFFFFF",shadow:!0}),this.addComponent(this.levelNumText),this.clicksText=new TextField(Main.viewContainer,"",{x:10,y:35,font:"30px Ubuntu Condensed",color:"#FFFFFF",shadow:!0}),this.updateClicksText(),this.addComponent(this.clicksText);for(var c=this.game.curLevel.data,d=c.circles,e=0;e<d.length;e++){var f=d[e];this.addCircle(f.x,f.y,f.shots,f.angle,f.gap,f.armor,!1)}this.addComponent(new Tutorial(this.game,Main.viewContainer)),this.tickListener=createjs.Ticker.on("tick",this.tick,this)},addCircle:function(a,b,c,d,e,f,g){var h=new Circle(this.game,this,Main.viewContainer,{x:a,y:b,shots:c,angle:d,gap:e,armor:f,wobble:g});this.addComponent(h)},updateClicksText:function(){this.clicksText.setText("Taps: "+this.game.clicks)},noClicksLeft:function(){console.log("No taps left :(")},pauseClick:function(){Main.addView(new PauseView(Main.viewContainer,this.game))},restartClick:function(){var a=this.game.curLevel.id;this.game.levelAbort(),this.game.levelStart(a)},addBullet:function(a,b,c){var d=Config.CIRCLE_RADIUS,e=Config.BULLET_SPEED,f=Math.cos(c*Math.PI/180),g=Math.sin(c*Math.PI/180);this.addComponent(new Bullet(this.game,this,Main.viewContainer,a+f*d,b+g*d,f*e,g*e,c))},tick:function(){this.checkCollisions(),this.updateObjects()},checkCollisions:function(){for(var a=this.components.length-1;a>=0;a--){var b=this.components[a];b instanceof Bullet&&this.checkBullet(b)}},checkBullet:function(a){for(var b=this.components.length-1;b>=0;b--){var c=this.components[b];if(c instanceof Circle&&this.checkBulletVsCircle(a,c)){this.game.circleBulletCollision(c,a);break}}},noCircles:function(){for(var a=0;a<this.components.length;a++){var b=this.components[a];if(b instanceof Circle)return!1}return!0},noBullets:function(){for(var a=0;a<this.components.length;a++){var b=this.components[a];if(b instanceof Bullet)return!1}return!0},checkBulletVsCircle:function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d);return e<Config.CIRCLE_RADIUS?!0:!1},updateObjects:function(){for(var a=createjs.Ticker.getMeasuredTickTime(),b=this.components.length-1;b>=0;b--){var c=this.components[b];c instanceof Bullet&&c.update(a)}},destroy:function(){createjs.Ticker.off("tick",this.tickListener),this._super()}}),MainMenuView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.addComponent(new Picture(Main.viewContainer,"gameTitle",{x:0,y:20}));var b=new Button(Main.viewContainer,"playButton",this.playClick,this,{x:160,y:240,center:!0});createjs.Tween.get(b.bmp,{loop:!0}).to({scaleX:1.2,scaleY:1.2},1e3,createjs.Ease.sineInOut).to({scaleX:1,scaleY:1},1e3,createjs.Ease.sineInOut),this.addComponent(b),this.addComponent(new SoundIcon(this.game,Main.viewContainer,130,410));var c=" "/*+Config.VERSION*/;this.addComponent(new TextField(Main.viewContainer,c,{color:"#FFFFFF",font:"10px Ubuntu Condensed"})),this.addComponent(new Button(Main.viewContainer,"restartButton",this.clearProgressClick,this,{x:280,y:440,center:!0})),this.addComponent(new Button(Main.viewContainer,"creditsButton",this.creditsClick,this,{x:40,y:440,center:!0}))},creditsClick:function(){Main.addView(new CreditsView(this.game))},clearProgressClick:function(){Main.addView(new DeleteProgressView(this.game))},playClick:function(){Fader.fade(this.gameStart,this)},gameStart:function(){Main.removeViewByClass(MainMenuView),Config.TEST_GAME_COMPLETE?this.game.gameComplete():Main.addView(new LevelSelectView(this.game))}}),PauseView=ComponentBox.extend({init:function(a,b){this._super(),this.parent=a,this.game=b,this.pic=new Picture(this.parent,"blackBack"),this.addComponent(this.pic),this.addComponent(new Picture(this.parent,"pauseInner",{x:50,y:120})),this.pic.bitmap.addEventListener("click",this),this.addComponent(new Button(this.parent,"playButton",this.resumeClick,this,{x:210,y:250,center:!0})),this.addComponent(new Button(this.parent,"exit2ButtonBig",this.exitClick,this,{x:110,y:250,center:!0})),this.pic.bitmap.alpha=0,createjs.Tween.get(this.pic.bitmap).to({alpha:1},500)},resumeClick:function(){Main.removeViewByClass(PauseView)},exitClick:function(){Fader.fade(this.goExit,this)},goExit:function(){this.game.gameAbort()},handleEvent:function(a){switch(a.type){case"click":}},destroy:function(){this._super(),this.pic.bitmap.removeEventListener("click",this)}});